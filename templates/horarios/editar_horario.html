{% extends 'base.html' %}

{% block title %}Editar Horario{% endblock %}

{% block content %}
<h2>Editar Horario</h2>
<form method="post" id="horarioForm">
    {% csrf_token %}
    <div id="horarioContainer">
        {% for horario in horarios %}
        <div class="horarioEntry">
            <label for="curso">Curso:</label>
            <input type="text" name="curso" value="{{ horario.curso }}" readonly>

            <label for="profesor">Profesor:</label>
            <input type="text" name="profesor" value="{{ horario.profesor }}" readonly>

            <label for="seccion">Sección:</label>
            <input type="text" name="seccion" value="{{ horario.seccion }}" readonly>

            <label for="dia">Día:</label>
            <select name="dia_semana[]" required>
                <option value="Lunes" {% if horario.dia_semana == 'Lunes' %}selected{% endif %}>Lunes</option>
                <option value="Martes" {% if horario.dia_semana == 'Martes' %}selected{% endif %}>Martes</option>
                <option value="Miércoles" {% if horario.dia_semana == 'Miércoles' %}selected{% endif %}>Miércoles</option>
                <option value="Jueves" {% if horario.dia_semana == 'Jueves' %}selected{% endif %}>Jueves</option>
                <option value="Viernes" {% if horario.dia_semana == 'Viernes' %}selected{% endif %}>Viernes</option>
                <option value="Sábado" {% if horario.dia_semana == 'Sábado' %}selected{% endif %}>Sábado</option>
            </select>

            <label for="hora_inicio">Hora Inicio:</label>
            <input type="time" name="hora_inicio[]" value="{{ horario.hora_inicio|time:'H:i' }}" required>

            <label for="hora_fin">Hora Fin:</label>
            <input type="time" name="hora_fin[]" value="{{ horario.hora_fin|time:'H:i' }}" required>
        </div>
        {% endfor %}
    </div>

    <button type="button" id="addHorario">+ Agregar otro día</button>
    <button type="submit">Guardar</button>
</form>
<a href="{% url 'listar_horarios' %}">Regresar a la lista de horarios</a>

<script>
    document.getElementById('addHorario').addEventListener('click', function() {
        // Crear un nuevo div para el nuevo horario
        var newEntry = document.createElement('div');
        newEntry.classList.add('horarioEntry');

        // Agregar campos para el nuevo día y horas con nombres únicos
        newEntry.innerHTML = `
            <label for="dia">Día:</label>
            <select name="dia_semana[]" required>
                <option value="Lunes">Lunes</option>
                <option value="Martes">Martes</option>
                <option value="Miércoles">Miércoles</option>
                <option value="Jueves">Jueves</option>
                <option value="Viernes">Viernes</option>
                <option value="Sábado">Sábado</option>
            </select>

            <label for="hora_inicio">Hora Inicio:</label>
            <input type="time" name="hora_inicio[]" required>

            <label for="hora_fin">Hora Fin:</label>
            <input type="time" name="hora_fin[]" required>
        `;

        // Agregar el nuevo horario al contenedor
        document.getElementById('horarioContainer').appendChild(newEntry);
    });
</script>
{% endblock %}
